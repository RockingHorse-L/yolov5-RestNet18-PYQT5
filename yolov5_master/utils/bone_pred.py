import numpy as np
import torch



def predChosse(pred):
    pred = pred.cpu().numpy()
    #pred = np.array(pred)
    idx = pred[:, 0].argsort()
    pred = pred[idx]
    idx_6 = np.where(pred[:, 5] == 6)
    idx_5 = np.where(pred[:, 5] == 5)
    idx_4 = np.where(pred[:, 5] == 4)
    idx_3 = np.where(pred[:, 5] == 3)
    idx_2 = np.where(pred[:, 5] == 2)
    idx_1 = np.where(pred[:, 5] == 1)
    idx_0 = np.where(pred[:, 5] == 0)

    #
    f_6 = pred[idx_6][::2]
    f_5 = pred[idx_5][::2]
    f_4 = pred[idx_4][::2]
    f_3 = pred[idx_3][::2]
    f_2 = pred[idx_2][::2]
    f_1 = pred[idx_1][::2]
    f_0 = pred[idx_0][::2]
    #
    f_0 = torch.tensor(f_0)
    f_1 = torch.tensor(f_1)
    f_2 = torch.tensor(f_2)
    f_3 = torch.tensor(f_3)
    f_4 = torch.tensor(f_4)
    f_5 = torch.tensor(f_5)
    f_6 = torch.tensor(f_6)

    result = torch.cat((f_0, f_1, f_2, f_3, f_4, f_5, f_6), dim=0)
    # print(idx)
    # print(f_6)
    # print(idx_3)
    # print(f_3)
    return result
    #print(type(idx_6))
#     print(f_4)
#     #print(
#
#   # 0: Radius
#   # 1: Ulna
#   # 2: MCPFirst
#   # 3: MCP
#   # 4: ProximalPhalanx
#   # 5: MiddlePhalanx
#   # 6: DistalPhalanx
if __name__ == '__main__':
    pred = [[188.50021, 516.84741, 296.04245, 635.84546, 0.77616, 0.00000],
            [198.97327, 115.41933, 273.88464, 183.69942, 0.77435, 5.00000],
            [288.27618, 137.47305, 361.61139, 207.24197, 0.77127, 5.00000],
            [308.74698, 51.27013, 377.48776, 135.77632, 0.76465, 6.00000],
            [115.32124, 144.64261, 185.38966, 210.27975, 0.76319, 5.00000],
            [132.16118, 542.98987, 200.57234, 635.08740, 0.75927, 1.00000],
            [263.93219, 217.22928, 334.49768, 305.29593, 0.75201, 4.00000],
            [102.69997, 43.33487, 170.42244, 130.02921, 0.74459, 6.00000],
            [133.59152, 226.86591, 196.76703, 313.86914, 0.74367, 4.00000],
            [96.95249, 311.68481, 150.99878, 412.10193, 0.74268, 3.00000],
            [352.43961, 331.78680, 428.46640, 414.66705, 0.74097, 4.00000],
            [208.36877, 6.99230, 279.33899, 95.97360, 0.73774, 6.00000],
            [43.89577, 213.26997, 104.74545, 270.95618, 0.73648, 5.00000],
            [143.07832, 289.94421, 197.67790, 388.14691, 0.73348, 3.00000],
            [399.98694, 242.00195, 478.48987, 342.01868, 0.73211, 6.00000],

            [74.11391, 264.51901, 140.01439, 341.58432, 0.72897, 4.00000],
            [263.10272, 414.17883, 375.68829, 525.91467, 0.72573, 2.00000],
            [193.71626, 276.13126, 255.53142, 382.65036, 0.71605, 3.00000],
            [254.47391, 272.24100, 320.67209, 394.15518, 0.71287, 3.00000],
            [195.02109, 211.54703, 261.31580, 300.88913, 0.70439, 4.00000],

            [16.50096, 139.99028, 77.75061, 218.06999, 0.69168, 6.00000]]
    pred = torch.tensor(pred)
    pred = predChosse(pred)
    #print(pred)